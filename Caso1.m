clear
clc

m1=60; m2=375;
W1=10; W2=1; W3=1.2;
f=1; s=0.05;
x=[4000, 1500, 5000, 3200];

g=@(x)W1*((s*(2*pi*f)^4*((2*pi*f)^2*x(1)^2+x(3)^2)*((2*pi*f)^2*x(2)^2+x(4)^2))/(m1*m2*(2*pi*f)^4+(x(1)*m2+x(2)*m1+x(2)*m2)*(2*pi*f)^3+(x(1)*x(2)+x(3)*m2+x(4)*m1+x(4)*m2)*(2*pi*f)^2+(x(1)*x(4)+x(2)*x(3))*(2*pi*f)+x(3)*x(4)))+....
W2*(((2*pi*f)^4*(x(1)^2*(2*pi*f)^2+x(3)^2)*(x(2)^2*(2*pi*f)^2+x(4)^2))/(m1*m2*(2*pi*f)^4+(x(1)*m2+x(2)*m1+x(2)*m2)*(2*pi*f)^3+(x(1)*x(2)+x(3)*m2+x(4)*m1+x(4)*m2)*(2*pi*f)^2+(x(1)*x(4)+x(2)*x(3))*(2*pi*f)+x(3)*x(4)))+....
W3*((16*pi^4*s*(f-0)^4*(x(3)^2+4*x(1)^2*pi^2*(f-0)^2)*(x(4)^2+4*x(2)^2*pi^2*(f-0)^2)*(2*pi*(x(1)*x(4)+x(2)*x(3))+4*pi^2*(2*f-2*0)*(x(1)*x(2)+x(3)*m2+x(4)*m1+x(4)*m2)+24*pi^3*(f-0)^2*(x(1)*m2+x(2)*m1+x(2)*m2)+64*m1*m2*pi^4*(f-0)^3))/(x(3)*x(4)+4*pi^2*(f-0)^2*(x(1)*x(2)+x(3)*m2+x(4)*m1+x(4)*m2)+8*pi^3*(f-0)^3*(x(1)*m2+x(2)*m1+x(2)*m2)+2*pi*(f-0)*(x(1)*x(4)+x(2)*x(3))+16*m1*m2*pi^4*(f-0)^4)^2-(64*pi^4*s*(f-0)^3*(x(3)^2+4*x(1)^2*pi^2*(f-0)^2)*(x(4)^2+4*x(2)^2*pi^2*(f-0)^2))/(x(3)*x(4)+4*pi^2*(f-0)^2*(x(1)*x(2)+x(3)*m2+x(4)*m1+x(4)*m2)+8*pi^3*(f-0)^3*(x(1)*m2+x(2)*m1+x(2)*m2)+2*pi*(f-0)*(x(1)*x(4)+x(2)*x(3))+16*m1*m2*pi^4*(f-0)^4)-(64*x(2)^2*pi^6*s*(f-0)^4*(x(3)^2+4*x(1)^2*pi^2*(f-0)^2)*(2*f-2*0))/(x(3)*x(4)+4*pi^2*(f-0)^2*(x(1)*x(2)+x(3)*m2+x(4)*m1+x(4)*m2)+8*pi^3*(f-0)^3*(x(1)*m2+x(2)*m1+x(2)*m2)+2*pi*(f-0)*(x(1)*x(4)+x(2)*x(3))+16*m1*m2*pi^4*(f-0)^4)-(64*x(1)^2*pi^6*s*(f-0)^4*(x(4)^2+4*x(2)^2*pi^2*(f-0)^2)*(2*f-2*0))/(x(3)*x(4)+4*pi^2*(f-0)^2*(x(1)*x(2)+x(3)*m2+x(4)*m1+x(4)*m2)+8*pi^3*(f-0)^3*(x(1)*m2+x(2)*m1+x(2)*m2)+2*pi*(f-0)*(x(1)*x(4)+x(2)*x(3))+16*m1*m2*pi^4*(f-0)^4));

nonlcon=[];
Aeq=[];
beq=[];
A=[];
b=[];
lb=1*[0.1,0.1,0.1,0.1];
up=120*[1, 1, 1, 1];
[x, fval, exitflag, output, lambda, grad, hessian]=fmincon(g, x, A, b, Aeq, beq, lb, up, nonlcon);


